import{h as C,t as I,i as B}from"./system-b297d58e.js";import{u as N}from"./useNav-2cc20504.js";import{d as x,r as F,a as l,o as _,c,w as o,b as g,e as r,f as V,u as P,g as S,m as i,K as E,_ as T}from"./index-98552006.js";import{a as n}from"./regexpUtils-6ff1dd76.js";const G={class:"page-content"},k={class:"flex flex-row flex-1"},q=x({__name:"tcp",setup(U){const{isAdmin:A}=N(),f=F(),v=F({sV4Address:[{required:!0,message:"\u8BF7\u8F93\u5165IP\u5730\u5740",trigger:"change"},{validator:(t,u,e)=>{u===""?e(new Error("\u8BF7\u8F93\u5165IP\u5730\u5740")):n(u)?e():e(new Error("\u8BF7\u8F93\u5165\u6B63\u786E\u7684IP\u5730\u5740"))},trigger:"change"}],sV4Netmask:[{required:!0,message:"\u8BF7\u8F93\u5165\u5B50\u7F51\u63A9\u7801",trigger:"change"},{validator:(t,u,e)=>{u===""?e(new Error("\u8BF7\u8F93\u5165\u5B50\u7F51\u63A9\u7801")):n(u)?e():e(new Error("\u8BF7\u8F93\u5165\u6B63\u786E\u7684\u5B50\u7F51\u63A9\u7801"))},trigger:"change"}],sV4Gateway:[{required:!0,message:"\u8BF7\u8F93\u5165\u7F51\u5173",trigger:"change"},{validator:(t,u,e)=>{u===""?e(new Error("\u8BF7\u8F93\u5165\u7F51\u5173")):n(u)?e():e(new Error("\u8BF7\u8F93\u5165\u6B63\u786E\u7684\u7F51\u5173"))},trigger:"change"}],sDNS1:[{validator:(t,u,e)=>{u===""||n(u)?e():e(new Error("\u8BF7\u8F93\u5165\u6B63\u786E\u7684\u9996\u9009DNS"))},trigger:"change"}],sDNS2:[{validator:(t,u,e)=>{u===""||n(u)?e():e(new Error("\u8BF7\u8F93\u5165\u6B63\u786E\u7684\u5907\u9009DNS"))},trigger:"change"}]});let p="";const s=F({sV4Address:"",sDNS1:"",sDNS2:"",sV4Gateway:"",sV4Netmask:""});C().then(t=>{s.value=t.data,p=s.value.sV4Address});function D(){s.value.sV4Address||i("\u8BF7\u8F93\u5165IP\u5730\u5740",{type:"error"}),I(s.value.sV4Address).then(t=>{t.data.iStatus==1?i("IP\u5730\u5740\u5DF2\u88AB\u5360\u7528",{type:"error"}):i("IP\u5730\u5740\u6D4B\u8BD5\u901A\u8FC7",{type:"success"})})}function h(){f.value.validate((t,u)=>{t&&(s.value.sV4Address===p?B(s.value).then(e=>{i("\u8BBE\u7F6E\u6210\u529F",{type:"success"})}):E.confirm("\u4FEE\u6539IP\u5C06\u4F1A\u91CD\u542F\u7CFB\u7EDF\uFF0C\u91CD\u542F\u5927\u7EA610\u5206\u949F\u540E\u624D\u53EF\u767B\u5F55\uFF0C\u786E\u5B9A\u8981\u4FEE\u6539\u5417\uFF1F","\u63D0\u793A",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",type:"warning"}).then(()=>{B(s.value).then(e=>{E.confirm("\u4FEE\u6539\u6210\u529F\uFF0C\u8BF710\u5206\u949F\u540E\uFF0C\u8BBF\u95EE\u65B0\u5730\u5740\uFF01","\u63D0\u793A",{confirmButtonText:"\u786E\u5B9A",showCancelButton:!1,showClose:!1,closeOnClickModal:!1,type:"success"}).then(()=>{location.reload()})})}))})}return(t,u)=>{const e=l("el-input"),m=l("el-button"),d=l("el-form-item"),w=l("el-form"),y=l("el-card");return _(),c(y,{class:"page-box"},{default:o(()=>[g("div",G,[r(w,{ref_key:"formRef",ref:f,model:s.value,rules:v.value,"label-width":"120","hide-required-asterisk":""},{default:o(()=>[r(d,{label:"IP\u5730\u5740",prop:"sV4Address"},{default:o(()=>[g("div",k,[r(e,{class:"flex-1 mr-1",modelValue:s.value.sV4Address,"onUpdate:modelValue":u[0]||(u[0]=a=>s.value.sV4Address=a),placeholder:"\u8BF7\u8F93\u5165IP\u5730\u5740"},null,8,["modelValue"]),r(m,{type:"primary",plain:"",onClick:D},{default:o(()=>[V("\u6D4B\u8BD5")]),_:1})])]),_:1}),r(d,{label:"\u5B50\u7F51\u63A9\u7801",prop:"sV4Netmask"},{default:o(()=>[r(e,{modelValue:s.value.sV4Netmask,"onUpdate:modelValue":u[1]||(u[1]=a=>s.value.sV4Netmask=a),placeholder:"\u8BF7\u8F93\u5165\u5B50\u7F51\u63A9\u7801"},null,8,["modelValue"])]),_:1}),r(d,{label:"\u7F51\u5173",prop:"sV4Gateway"},{default:o(()=>[r(e,{modelValue:s.value.sV4Gateway,"onUpdate:modelValue":u[2]||(u[2]=a=>s.value.sV4Gateway=a),placeholder:"\u8BF7\u8F93\u5165\u7F51\u5173"},null,8,["modelValue"])]),_:1}),r(d,null,{default:o(()=>[P(A)?(_(),c(m,{key:0,type:"primary",onClick:h},{default:o(()=>[V(" \u4FDD\u5B58 ")]),_:1})):S("",!0)]),_:1})]),_:1},8,["model","rules"])])]),_:1})}}});const j=T(q,[["__scopeId","data-v-f11f31da"]]);export{j as default};
