import{V as X,a as h,g as Y,S as G,P as H}from"./index-2df8a7f5.js";import{u as J}from"./useNav-2cc20504.js";import{S as W,D as z}from"./index-a2113198.js";import{t as K,h as Q,i as Z,j as $}from"./alarm-9138ebc0.js";import{d as ee,r as n,a as p,o as r,F as b,b as d,e as u,w as o,H as C,G as x,u as y,f as c,c as V,g as le,I as ae,J as ue,_ as oe}from"./index-98552006.js";const te=v=>(ae("data-v-3e06c4d7"),v=v(),ue(),v),se={class:"edit-page-box"},ie={class:"flex items-center"},ne=te(()=>d("div",{class:"info-label"},"\u901A\u9053\u53F7",-1)),re={class:"flex",style:{padding:"30px 10px 10px 20px"}},de={class:"flex flex-col"},pe={class:"video-box",style:{position:"relative"}},me={style:{padding:"20px 0 0 0"}},ve={class:"flex-col flex-1",style:{padding:"0 0 10px 10px"}},ce=ee({__name:"temperatureEdit",props:{dataInfo:{type:Object,require:!0}},emits:["onSuccess"],setup(v,{emit:D}){const R=v,{isAdmin:S}=J(),w=n(),E=n(),B=n([]),F=n(1),N=n({...new X,stretch:!0,showVoice:!1,showClose:!1,showScreenshot:!1}),T=n({iEmissivity:[{type:"number",message:"\u8BF7\u8F93\u51651~100\u7684\u6570\u5B57",trigger:"change"},{validator:(s,e,t)=>{Number(e)<1||Number(e)>100?t(new Error("\u8BF7\u8F93\u51651~100\u7684\u6570\u5B57")):t()},trigger:"change"}]}),a=n({...R.dataInfo}),f=n(h.point),g=n();U();function U(){const s=[];a.value.regional.forEach(e=>{s.push([e.iPositionX,e.iPositionY])}),k(),B.value=s,Y().then(e=>{const t=e.data.findIndex(m=>m.streamType==G.ir);t>-1&&(g.value=e.data[t].mainStreamURL)})}function I(s){if(s.pointList.length>0){a.value.regional=[];for(let e=0;e<s.pointList.length;e++){const t=s.pointList[e];a.value.regional.push({id:e,iPositionX:t.x,iPositionY:t.y})}}}function P(){}function k(){switch(B.value=[],a.value.iType){case 0:f.value=h.point;break;case 1:f.value=h.brokenline;break;case 2:f.value=h.polygon;break}}function L(){switch(a.value.ismoothNess){case 0:a.value.iEmissivity=95;break;case 1:a.value.iEmissivity=80;break;case 2:a.value.iEmissivity=60;break;case 3:a.value.iEmissivity=30;break}}function O(){E.value.clearShapes(!0)}function M(){w.value.validate((s,e)=>{s&&$(a.value).then(t=>{D("onSuccess",a.value)})})}return(s,e)=>{const t=p("el-option"),m=p("el-select"),_=p("el-input"),i=p("el-form-item"),j=p("el-checkbox"),A=p("el-button"),q=p("el-form");return r(),b("div",se,[d("div",null,[d("div",ie,[ne,u(m,{modelValue:F.value,"onUpdate:modelValue":e[0]||(e[0]=l=>F.value=l),placeholder:"\u8BF7\u9009\u62E9",onChange:P},{default:o(()=>[u(t,{label:"\u7EA2\u5916\u901A\u9053",value:1})]),_:1},8,["modelValue"])]),d("div",re,[d("div",de,[d("div",pe,[u(W,{class:"video-box","play-url":g.value,"onUpdate:play-url":e[1]||(e[1]=l=>g.value=l),options:N.value,"hide-controls":!0},null,8,["play-url","options"]),u(z,{ref_key:"drawShapeRef",ref:E,visible:!0,shape:f.value,points:B.value,"broken-line-count":1,onDrawComplete:I},null,8,["shape","points"])]),d("div",me,[u(H,{class:"pan-tilt","show-assist":!1,"show-speed":!1,"show-title":!1,"video-type":1})])]),d("div",ve,[u(q,{ref_key:"formRef",ref:w,model:a.value,rules:T.value,"label-width":"100","hide-required-asterisk":""},{default:o(()=>[u(i,{label:"\u540D\u79F0",prop:"sName"},{default:o(()=>[u(_,{modelValue:a.value.sName,"onUpdate:modelValue":e[2]||(e[2]=l=>a.value.sName=l),placeholder:"\u8BF7\u8F93\u5165\u540D\u79F0"},null,8,["modelValue"])]),_:1}),u(i,{label:"\u7C7B\u578B",prop:"iType"},{default:o(()=>[u(m,{style:{width:"100%"},modelValue:a.value.iType,"onUpdate:modelValue":e[3]||(e[3]=l=>a.value.iType=l),placeholder:"\u8BF7\u9009\u62E9",onChange:k},{default:o(()=>[(r(!0),b(C,null,x(y(K),l=>(r(),V(t,{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),u(i,{label:"\u53D1\u5C04\u7387\u7C7B\u578B",prop:"ismoothNess"},{default:o(()=>[u(m,{style:{width:"100%"},modelValue:a.value.ismoothNess,"onUpdate:modelValue":e[4]||(e[4]=l=>a.value.ismoothNess=l),placeholder:"\u8BF7\u9009\u62E9",onChange:L},{default:o(()=>[(r(!0),b(C,null,x(y(Q),l=>(r(),V(t,{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),u(i,{label:"\u53D1\u5C04\u7387",prop:"iEmissivity"},{default:o(()=>[u(_,{style:{width:"100%"},disabled:a.value.ismoothNess!=4,modelValue:a.value.iEmissivity,"onUpdate:modelValue":e[5]||(e[5]=l=>a.value.iEmissivity=l),modelModifiers:{number:!0},placeholder:"\u8BF7\u8F93\u5165\u53D1\u5C04\u7387"},{append:o(()=>[c("%")]),_:1},8,["disabled","modelValue"])]),_:1}),u(i,{label:"\u8DDD\u79BB",prop:"iDistance"},{default:o(()=>[u(_,{style:{width:"100%"},modelValue:a.value.iDistance,"onUpdate:modelValue":e[6]||(e[6]=l=>a.value.iDistance=l),modelModifiers:{number:!0},placeholder:"\u8BF7\u8F93\u5165\u8DDD\u79BB"},{append:o(()=>[c("m")]),_:1},8,["modelValue"])]),_:1}),u(i,{label:"\u62A5\u8B66\u89C4\u5219\u7C7B\u578B",prop:"sAlarmRule.iRule"},{default:o(()=>[u(m,{style:{width:"100%"},modelValue:a.value.sAlarmRule.iRule,"onUpdate:modelValue":e[7]||(e[7]=l=>a.value.sAlarmRule.iRule=l),placeholder:"\u8BF7\u9009\u62E9"},{default:o(()=>[(r(!0),b(C,null,x(y(Z),l=>(r(),V(t,{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),u(i,{label:"\u62A5\u8B66\u9608\u503C",prop:"sAlarmRule.iAlarmThreshold"},{default:o(()=>[u(_,{style:{width:"100%"},modelValue:a.value.sAlarmRule.iAlarmThreshold,"onUpdate:modelValue":e[8]||(e[8]=l=>a.value.sAlarmRule.iAlarmThreshold=l),modelModifiers:{number:!0},placeholder:"\u8BF7\u8F93\u5165\u62A5\u8B66\u9608\u503C"},{append:o(()=>[c("\u2103")]),_:1},8,["modelValue"])]),_:1}),u(i,{label:"\u662F\u5426\u542F\u52A8",prop:"iEnabled"},{default:o(()=>[u(j,{label:"\u542F\u52A8","true-label":1,"false-label":0,modelValue:a.value.iEnabled,"onUpdate:modelValue":e[9]||(e[9]=l=>a.value.iEnabled=l)},null,8,["modelValue"])]),_:1}),u(i,null,{default:o(()=>[u(A,{type:"default",onClick:O},{default:o(()=>[c(" \u91CD\u65B0\u7ED8\u5236 ")]),_:1}),y(S)?(r(),V(A,{key:0,type:"primary",onClick:M},{default:o(()=>[c(" \u4FDD\u5B58 ")]),_:1})):le("",!0)]),_:1})]),_:1},8,["model","rules"])])])])])}}});const Ve=oe(ce,[["__scopeId","data-v-3e06c4d7"]]);export{Ve as default};
