import{u as q}from"./useNav-2cc20504.js";import{d as O,r as d,a as s,o as n,c as p,w as a,b as y,e as o,F as E,G as F,H as g,u as A,a5 as R,f as C,g as T,a6 as G,m as v,x as J,I as j,J as z,_ as K}from"./index-98552006.js";const M=r=>(j("data-v-b88b949f"),r=r(),z(),r),P={class:"page-content"},Q={class:"flex items-center",style:{"padding-bottom":"15px"}},W=M(()=>y("div",{class:"info-label"},"\u901A\u9053\u53F7",-1)),X=O({__name:"model",setup(r){const{isAdmin:h}=q(),b=d(),k=[{value:"10",label:"\u7EA2\u5916\u4EBA\u5458\u5165\u4FB5\u6A21\u578B"},{value:"11",label:"\u7EA2\u5916\u6D4B\u6E29\u6A21\u578B"}],V=[{value:"00",label:"\u53EF\u89C1\u5149\u4EBA\u5458\u5165\u4FB5\u6A21\u578B"},{value:"01",label:"\u53EF\u89C1\u5149\u6D4B\u6E29\u6A21\u578B"}],i=d(),_=d(0),x=d({model_type:[{required:!0,message:"\u8BF7\u9009\u62E9\u7B97\u6CD5\u7C7B\u578B",trigger:"change"}],File:[{required:!0,message:"\u8BF7\u9009\u62E9\u6587\u4EF6",trigger:"change"}]}),u=d({model_type:"00",File:new Array});function w(){_.value==0?u.value.model_type="00":u.value.model_type="10"}function I(){b.value.validate((t,l)=>{t&&i.value.submit()})}const D=t=>{i.value.clearFiles();const l=t[0];l.uid=G(),i.value.handleStart(l)},S=t=>{t.code==200?v("\u4E0A\u4F20\u6210\u529F",{type:"success"}):t.code==401?J().logOut():v(t.msg,{type:"error"})},U=()=>{v("\u4E0A\u4F20\u5931\u8D25",{type:"error"})};return(t,l)=>{const c=s("el-option"),m=s("el-select"),f=s("el-form-item"),B=s("el-button"),H=s("el-upload"),N=s("el-form"),L=s("el-card");return n(),p(L,{class:"page-box"},{default:a(()=>[y("div",P,[y("div",Q,[W,o(m,{style:{width:"100%"},modelValue:_.value,"onUpdate:modelValue":l[0]||(l[0]=e=>_.value=e),placeholder:"\u8BF7\u9009\u62E9",onChange:w},{default:a(()=>[o(c,{label:"\u53EF\u89C1\u5149\u901A\u9053",value:0}),o(c,{label:"\u7EA2\u5916\u901A\u9053",value:1})]),_:1},8,["modelValue"])]),o(N,{ref_key:"formRef",ref:b,model:u.value,rules:x.value,"label-width":"120","hide-required-asterisk":""},{default:a(()=>[o(f,{label:"\u7B97\u6CD5\u7C7B\u578B",prop:"model_type"},{default:a(()=>[_.value==0?(n(),p(m,{key:0,style:{width:"100%"},modelValue:u.value.model_type,"onUpdate:modelValue":l[1]||(l[1]=e=>u.value.model_type=e),placeholder:"\u8BF7\u9009\u62E9"},{default:a(()=>[(n(),E(g,null,F(V,e=>o(c,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])):(n(),p(m,{key:1,style:{width:"100%"},modelValue:u.value.model_type,"onUpdate:modelValue":l[2]||(l[2]=e=>u.value.model_type=e),placeholder:"\u8BF7\u9009\u62E9"},{default:a(()=>[(n(),E(g,null,F(k,e=>o(c,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"]))]),_:1}),o(f,{label:"\u6587\u4EF6\u9009\u62E9",prop:"File"},{default:a(()=>[o(H,{ref_key:"upload",ref:i,style:{width:"100%"},action:A(R)().VITE_BASE_URL+"/cgi-bin/entry.cgi/event/update_model?model_type="+u.value.model_type,name:"File",limit:1,"file-list":u.value.File,"onUpdate:file-list":l[3]||(l[3]=e=>u.value.File=e),data:{model_type:u.value.model_type},"on-exceed":D,"on-success":S,"on-error":U,"auto-upload":!1},{trigger:a(()=>[o(B,{type:"primary"},{default:a(()=>[C("\u9009\u62E9\u6587\u4EF6")]),_:1})]),_:1},8,["action","file-list","data"])]),_:1}),o(f,null,{default:a(()=>[A(h)?(n(),p(B,{key:0,type:"primary",onClick:I},{default:a(()=>[C(" \u4FDD\u5B58 ")]),_:1})):T("",!0)]),_:1})]),_:1},8,["model","rules"])])]),_:1})}}});const $=K(X,[["__scopeId","data-v-b88b949f"]]);export{$ as default};
